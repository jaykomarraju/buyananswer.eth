import*as n from"react";import{useState as e,useRef as t,useCallback as o,useEffect as r,useLayoutEffect as i}from"react";import{flushSync as l}from"react-dom";import a from"raf";import c from"tiny-warning";function d(){return d=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},d.apply(this,arguments)}function u(n,e){if(null==n)return{};var t,o,r={},i=Object.keys(n);for(o=0;o<i.length;o++)e.indexOf(t=i[o])>=0||(r[t]=n[t]);return r}var s=function(){};function f(n){return null!=n&&n.current?n.current.scrollHeight:(c(!0,"useCollapse was not able to find a ref to the collapse element via `getCollapseProps`. Ensure that the element exposes its `ref` prop. If it exposes the ref prop under a different name (like `innerRef`), use the `refKey` property to change it. Example:\n\n{...getCollapseProps({refKey: 'innerRef'})}"),"auto")}var p=function(){var n=arguments;return function(){var e=arguments;return[].slice.call(n).forEach(function(n){return n&&n.apply(void 0,[].slice.call(e))})}};function h(n,e){if(null!=n)if("function"==typeof n)n(e);else try{n.current=e}catch(t){throw new Error('Cannot assign value "'+e+'" to ref "'+n+'"')}}var v="undefined"!=typeof window?i:r,g=!1,m=0,x=function(){return++m},y=n.useId,E=["duration","easing","collapseStyles","expandStyles","onExpandStart","onExpandEnd","onCollapseStart","onCollapseEnd","isExpanded","defaultExpanded","hasDisabledAnimation"],b=["disabled","onClick"],C=["style","onTransitionEnd","refKey"];function w(n){var i,m,w=void 0===n?{}:n,S=w.duration,k=w.easing,O=void 0===k?"cubic-bezier(0.4, 0, 0.2, 1)":k,P=w.collapseStyles,T=void 0===P?{}:P,D=w.expandStyles,K=void 0===D?{}:D,j=w.onExpandStart,I=void 0===j?s:j,N=w.onExpandEnd,z=void 0===N?s:N,A=w.onCollapseStart,H=void 0===A?s:A,M=w.onCollapseEnd,R=void 0===M?s:M,q=w.isExpanded,B=w.defaultExpanded,V=void 0!==B&&B,_=w.hasDisabledAnimation,F=void 0!==_&&_,G=u(w,E),J=function(n,i){var l=e(i||!1),a=l[0],d=l[1],u=t(null!=n),s=u.current?n:a,f=o(function(n){u.current||d(n)},[]);return r(function(){c(!(u.current&&null==n),"useCollapse is changing from controlled to uncontrolled. useCollapse should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled collapse for the lifetime of the component. Check the `isExpanded` prop."),c(!(!u.current&&null!=n),"useCollapse is changing from uncontrolled to controlled. useCollapse should not switch from uncontrolled to controlled (or vice versa). Decide between using a controlled or uncontrolled collapse for the lifetime of the component. Check the `isExpanded` prop.")},[n]),[s,f]}(q,V),L=J[0],Q=J[1],U=void 0!==y?y():function(n){var t=g?x():null,o=e(t),i=o[0],l=o[1];return v(function(){null===i&&l(x())},[]),r(function(){!1===g&&(g=!0)},[]),null!=i?String(i):void 0}(),W=t(null);i=W,m=function(n){},"production"!==process.env.NODE_ENV&&(m=function(n){if(null!=n&&n.current){var e=window.getComputedStyle(n.current),t=e.paddingTop,o=e.paddingBottom;c(!(t&&"0px"!==t||o&&"0px"!==o),"react-collapsed: Padding applied to the collapse element will cause the animation to break and not perform as expected. To fix, apply equivalent padding to the direct descendent of the collapse element.")}}),r(function(){m(i)},[i]);var X,Y,Z,$=(G.collapsedHeight||0)+"px",nn={display:"0px"===$?"none":"block",height:$,overflow:"hidden"},en=e(L?{}:nn),tn=en[0],on=en[1],rn=function(n){l(function(){on(n)})},ln=function(n){rn(function(e){return d({},e,n)})};function an(n){if(F)return{};var e=S||function(n){if(!n||"string"==typeof n)return 0;var e=n/36;return Math.round(10*(4+15*Math.pow(e,.25)+e/5))}(n);return{transition:"height "+e+"ms "+O}}X=function(){a(L?function(){I(),ln(d({},K,{willChange:"height",display:"block",overflow:"hidden"})),a(function(){var n=f(W);ln(d({},an(n),{height:n}))})}:function(){H();var n=f(W);ln(d({},T,an(n),{willChange:"height",height:n})),a(function(){ln({height:$,overflow:"hidden"})})})},Y=[L,$],Z=t(!0),r(function(){if(!Z.current)return X();Z.current=!1},Y);var cn=function(n){if(n.target===W.current&&"height"===n.propertyName)if(L){var e=f(W);e===tn.height?rn({}):ln({height:e}),z()}else tn.height===$&&(rn(nn),R())};return{getToggleProps:function(n){var e=void 0===n?{}:n,t=e.disabled,o=void 0!==t&&t,r=e.onClick,i=void 0===r?s:r,l=u(e,b);return d({type:"button",role:"button",id:"react-collapsed-toggle-"+U,"aria-controls":"react-collapsed-panel-"+U,"aria-expanded":L,tabIndex:0,disabled:o},l,{onClick:o?s:p(i,function(){return Q(function(n){return!n})})})},getCollapseProps:function(n){var e,t=void 0===n?{}:n,o=t.style,r=void 0===o?{}:o,i=t.onTransitionEnd,l=void 0===i?s:i,a=t.refKey,c=void 0===a?"ref":a,f=u(t,C);return d({id:"react-collapsed-panel-"+U,"aria-hidden":!L},f,((e={})[c]=function(){var n=[].slice.call(arguments);return n.every(function(n){return null==n})?null:function(e){n.forEach(function(n){h(n,e)})}}(W,f[c]),e.onTransitionEnd=p(cn,l),e.style=d({boxSizing:"border-box"},r,tn),e))},isExpanded:L,setExpanded:Q}}export{w as default};
//# sourceMappingURL=react-collapsed.esm.js.map
